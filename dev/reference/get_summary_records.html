<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Development on get_summary_records() is complete, and for new code we recommend
switching to using the dataset_add argument in derive_summary_records().
It is not uncommon to have an analysis need whereby one needs to derive an
analysis value (AVAL) from multiple records. The ADaM basic dataset
structure variable DTYPE is available to indicate when a new derived
records has been added to a dataset."><title>Create Summary Records — get_summary_records • admiral</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create Summary Records — get_summary_records"><meta property="og:description" content="
Development on get_summary_records() is complete, and for new code we recommend
switching to using the dataset_add argument in derive_summary_records().
It is not uncommon to have an analysis need whereby one needs to derive an
analysis value (AVAL) from multiple records. The ADaM basic dataset
structure variable DTYPE is available to indicate when a new derived
records has been added to a dataset."><meta property="og:image" content="https://pharmaverse.github.io/admiral/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">admiral</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9004</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-get-started">Get Started</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-get-started">
    <a class="dropdown-item" href="../articles/admiral.html">Simple ADSL Walkthrough</a>
    <a class="dropdown-item" href="https://pharmaverse.github.io/admiraldiscovery/articles/reactable.html">CDISC Variables mapped to admiral functions</a>
    <a class="external-link dropdown-item" href="https://github.com/pharmaverse/admiral/blob/main/inst/cheatsheet/admiral_cheatsheet.pdf">Cheatsheet</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-user-guides">User Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-user-guides">
    <a class="dropdown-item" href="../articles/adsl.html">Creating a Basic ADSL</a>
    <a class="dropdown-item" href="../articles/faq.html">FAQ</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Deep Dives on ADaMs</h6>
    <a class="dropdown-item" href="../articles/occds.html">Creating an OCCDS ADaM</a>
    <a class="dropdown-item" href="../articles/bds_finding.html">Creating a BDS Findings ADAM</a>
    <a class="dropdown-item" href="../articles/bds_exposure.html">Creating a BDS Exposure ADaM</a>
    <a class="dropdown-item" href="../articles/bds_tte.html">Creating a BDS Time-to-Event ADaM</a>
    <a class="dropdown-item" href="../articles/questionnaires.html">Creating Questionnaire ADaMs</a>
    <a class="dropdown-item" href="../articles/pk_adnca.html">Creating a PK NCA or Population PK ADaM</a>
    <h6 class="dropdown-header" data-toc-skip>Advanced User Guides</h6>
    <a class="dropdown-item" href="../articles/imputation.html">Date and Time Imputation</a>
    <a class="dropdown-item" href="../articles/visits_periods.html">Visit and Period Variables</a>
    <a class="dropdown-item" href="../articles/generic.html">Generic Derivations</a>
    <a class="dropdown-item" href="../articles/higher_order.html">Higher Order Functions</a>
    <a class="dropdown-item" href="../articles/queries_dataset.html">Queries Dataset Documentation</a>
    <a class="dropdown-item" href="../articles/lab_grading.html">Lab Grading</a>
    <a class="dropdown-item" href="../articles/hys_law.html">Hy's Law Implementation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://app.slack.com/client/T028PB489D3/C02M8KN8269" aria-label="Slack">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/website-versions.html" aria-label="Previous Release Websites">
    <span class="fa fa-history"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/issues/new/choose" aria-label="New Issue">
    <span class="fa fa-bug"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiral/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create Summary Records</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiral/blob/main/R/get_summary_records.R" class="external-link"><code>R/get_summary_records.R</code></a></small>
      <div class="d-none name"><code>get_summary_records.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded" class="external-link"><img src="figures/lifecycle-superseded.svg" alt="[Superseded]"></a></p>
<p>Development on <code>get_summary_records()</code> is complete, and for new code we recommend
switching to using the <code>dataset_add</code> argument in <code><a href="derive_summary_records.html">derive_summary_records()</a></code>.</p>
<p>It is not uncommon to have an analysis need whereby one needs to derive an
analysis value (<code>AVAL</code>) from multiple records. The ADaM basic dataset
structure variable <code>DTYPE</code> is available to indicate when a new derived
records has been added to a dataset.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_summary_records</span><span class="op">(</span></span>
<span>  <span class="va">dataset</span>,</span>
<span>  <span class="va">by_vars</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">analysis_var</span>,</span>
<span>  <span class="va">summary_fun</span>,</span>
<span>  set_values_to <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dataset</dt>
<dd><p>Input dataset</p>
<p>The variables specified by the <code>by_vars</code> and <code>analysis_var</code> arguments are expected to be in the dataset.</p></dd>


<dt>by_vars</dt>
<dd><p>Grouping variables</p>
<p>Variables to consider for generation of groupwise summary records.</p>
<p><em>Permitted Values</em>: list of variables created by <code><a href="reexport-exprs.html">exprs()</a></code>
e.g. <code>exprs(USUBJID, VISIT)</code></p></dd>


<dt>filter</dt>
<dd><p>Filter condition as logical expression to apply during
summary calculation. By default, filtering expressions are computed within
<code>by_vars</code> as this will help when an aggregating, lagging, or ranking
function is involved.</p>
<p>For example,</p><ul><li><p><code>filter_rows = (AVAL &gt; mean(AVAL, na.rm = TRUE))</code> will filter all AVAL
values greater than mean of AVAL with in <code>by_vars</code>.</p></li>
<li><p><code>filter_rows = (dplyr::n() &gt; 2)</code> will filter n count of <code>by_vars</code> greater
than 2.</p></li>
</ul></dd>


<dt>analysis_var</dt>
<dd><p>Analysis variable.</p>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Please use <code>set_values_to</code> instead.</p></dd>


<dt>summary_fun</dt>
<dd><p>Function that takes as an input the <code>analysis_var</code> and
performs the calculation.</p>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Please use <code>set_values_to</code> instead.</p>
<p>This can include built-in functions as well as user defined functions,
for example <code>mean</code> or <code>function(x) mean(x, na.rm = TRUE)</code>.</p></dd>


<dt>set_values_to</dt>
<dd><p>Variables to be set</p>
<p>The specified variables are set to the specified values for the new
observations.</p>
<p>Set a list of variables to some specified value for the new records</p><ul><li><p>LHS refer to a variable.</p></li>
<li><p>RHS refers to the values to set to the variable. This can be a string, a
symbol, a numeric value, an expression or NA. If summary functions are
used, the values are summarized by the variables specified for <code>by_vars</code>.</p></li>
</ul><p>For example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>  set_values_to <span class="ot">=</span> <span class="fu">exprs</span>(</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="at">AVAL =</span> <span class="fu">sum</span>(AVAL),</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    <span class="at">PARAMCD =</span> <span class="st">"TDOSE"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="at">PARCAT1 =</span> <span class="st">"OVERALL"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  )</span></code></pre><p></p></div></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame of derived records.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function only creates derived observations and does not append them
to the original dataset observations. If you would like to this instead,
see the <code><a href="derive_summary_records.html">derive_summary_records()</a></code> function.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="derive_summary_records.html">derive_summary_records()</a></code>, <code><a href="derive_var_merged_summary.html">derive_var_merged_summary()</a></code></p>
<p>Other superseded: 
<code><a href="date_source.html">date_source</a>()</code>,
<code><a href="derive_param_extreme_record.html">derive_param_extreme_record</a>()</code>,
<code><a href="derive_var_dthcaus.html">derive_var_dthcaus</a>()</code>,
<code><a href="derive_var_extreme_dt.html">derive_var_extreme_dt</a>()</code>,
<code><a href="derive_var_extreme_dtm.html">derive_var_extreme_dtm</a>()</code>,
<code><a href="dthcaus_source.html">dthcaus_source</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adeg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>,   <span class="op">~</span><span class="va">EGSEQ</span>, <span class="op">~</span><span class="va">PARAM</span>,             <span class="op">~</span><span class="va">AVISIT</span>,    <span class="op">~</span><span class="va">EGDTC</span>,             <span class="op">~</span><span class="va">AVAL</span>, <span class="op">~</span><span class="va">TRTA</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">1</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-24T07:50"</span>, <span class="fl">385</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">2</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-24T07:52"</span>, <span class="fl">399</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">3</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-24T07:56"</span>, <span class="fl">396</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">4</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-08T09:45"</span>, <span class="fl">384</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">5</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-08T09:48"</span>, <span class="fl">393</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">6</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-08T09:51"</span>, <span class="fl">388</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">7</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-22T10:45"</span>, <span class="fl">385</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">8</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-22T10:48"</span>, <span class="fl">394</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">9</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-22T10:51"</span>, <span class="fl">402</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">1</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-22T07:58"</span>, <span class="fl">399</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">2</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-22T07:58"</span>, <span class="fl">410</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">3</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-22T08:01"</span>, <span class="fl">392</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">4</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-06T09:50"</span>, <span class="fl">401</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">5</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-06T09:53"</span>, <span class="fl">407</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">6</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-06T09:56"</span>, <span class="fl">400</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">7</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-24T10:50"</span>, <span class="fl">412</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">8</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-24T10:53"</span>, <span class="fl">414</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">9</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-24T10:56"</span>, <span class="fl">402</span>,   <span class="st">"Active 20mg"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summarize the average of the triplicate ECG interval values (AVAL)</span></span></span>
<span class="r-in"><span><span class="fu">get_summary_records</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">adeg</span>,</span></span>
<span class="r-in"><span>  by_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">PARAM</span>, <span class="va">AVISIT</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AVAL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    DTYPE <span class="op">=</span> <span class="st">"AVERAGE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID  PARAM            AVISIT    AVAL DTYPE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> XYZ-1001 QTcF Int. (msec) Baseline  393. AVERAGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> XYZ-1001 QTcF Int. (msec) Visit 2   388. AVERAGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> XYZ-1001 QTcF Int. (msec) Visit 3   394. AVERAGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> XYZ-1002 QTcF Int. (msec) Baseline  400. AVERAGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> XYZ-1002 QTcF Int. (msec) Visit 2   403. AVERAGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> XYZ-1002 QTcF Int. (msec) Visit 3   409. AVERAGE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Derive more than one summary variable</span></span></span>
<span class="r-in"><span><span class="fu">get_summary_records</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">adeg</span>,</span></span>
<span class="r-in"><span>  by_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">PARAM</span>, <span class="va">AVISIT</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    ASTDTM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="convert_dtc_to_dtm.html">convert_dtc_to_dtm</a></span><span class="op">(</span><span class="va">EGDTC</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    AENDTM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="convert_dtc_to_dtm.html">convert_dtc_to_dtm</a></span><span class="op">(</span><span class="va">EGDTC</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    DTYPE <span class="op">=</span> <span class="st">"AVERAGE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID  PARAM      AVISIT  AVAL ASTDTM              AENDTM              DTYPE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> XYZ-1001 QTcF Int.… Basel…  393. 2016-02-24 <span style="color: #949494;">07:50:00</span> 2016-02-24 <span style="color: #949494;">07:56:00</span> AVER…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> XYZ-1001 QTcF Int.… Visit…  388. 2016-03-08 <span style="color: #949494;">09:45:00</span> 2016-03-08 <span style="color: #949494;">09:51:00</span> AVER…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> XYZ-1001 QTcF Int.… Visit…  394. 2016-03-22 <span style="color: #949494;">10:45:00</span> 2016-03-22 <span style="color: #949494;">10:51:00</span> AVER…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> XYZ-1002 QTcF Int.… Basel…  400. 2016-02-22 <span style="color: #949494;">07:58:00</span> 2016-02-22 <span style="color: #949494;">08:01:00</span> AVER…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> XYZ-1002 QTcF Int.… Visit…  403. 2016-03-06 <span style="color: #949494;">09:50:00</span> 2016-03-06 <span style="color: #949494;">09:56:00</span> AVER…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> XYZ-1002 QTcF Int.… Visit…  409. 2016-03-24 <span style="color: #949494;">10:50:00</span> 2016-03-24 <span style="color: #949494;">10:56:00</span> AVER…</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sample ADEG dataset with triplicate record for only AVISIT = 'Baseline'</span></span></span>
<span class="r-in"><span><span class="va">adeg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>,   <span class="op">~</span><span class="va">EGSEQ</span>, <span class="op">~</span><span class="va">PARAM</span>,             <span class="op">~</span><span class="va">AVISIT</span>,    <span class="op">~</span><span class="va">EGDTC</span>,             <span class="op">~</span><span class="va">AVAL</span>, <span class="op">~</span><span class="va">TRTA</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">1</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-24T07:50"</span>, <span class="fl">385</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">2</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-24T07:52"</span>, <span class="fl">399</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">3</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-24T07:56"</span>, <span class="fl">396</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">4</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-08T09:48"</span>, <span class="fl">393</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">5</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-08T09:51"</span>, <span class="fl">388</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">6</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-22T10:48"</span>, <span class="fl">394</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1001"</span>, <span class="fl">7</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-22T10:51"</span>, <span class="fl">402</span>,   <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">1</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-22T07:58"</span>, <span class="fl">399</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">2</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-22T07:58"</span>, <span class="fl">410</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">3</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Baseline"</span>, <span class="st">"2016-02-22T08:01"</span>, <span class="fl">392</span>,   <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">4</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-06T09:53"</span>, <span class="fl">407</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">5</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 2"</span>,  <span class="st">"2016-03-06T09:56"</span>, <span class="fl">400</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">6</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-24T10:53"</span>, <span class="fl">414</span>,   <span class="st">"Active 20mg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"XYZ-1002"</span>, <span class="fl">7</span>,      <span class="st">"QTcF Int. (msec)"</span>, <span class="st">"Visit 3"</span>,  <span class="st">"2016-03-24T10:56"</span>, <span class="fl">402</span>,   <span class="st">"Active 20mg"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute the average of AVAL only if there are more than 2 records within the</span></span></span>
<span class="r-in"><span><span class="co"># by group</span></span></span>
<span class="r-in"><span><span class="fu">get_summary_records</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">adeg</span>,</span></span>
<span class="r-in"><span>  by_vars <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">PARAM</span>, <span class="va">AVISIT</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  filter <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  set_values_to <span class="op">=</span> <span class="fu"><a href="reexport-exprs.html">exprs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AVAL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    DTYPE <span class="op">=</span> <span class="st">"AVERAGE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID  PARAM            AVISIT    AVAL DTYPE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> XYZ-1001 QTcF Int. (msec) Baseline  393. AVERAGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> XYZ-1002 QTcF Int. (msec) Baseline  400. AVERAGE</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ben Straub, Stefan Bundfuss, Jeffrey Dickinson, Ross Farrugia, Adam Forys, G Gayatri, Daphne Grasselly, Dinakar Kulkarni, Edoardo Mancini, Sadchla Mascary, Gordon Miller, Sophie Shapcott, Eric Simms, Daniel Sjoberg, Stefan Thoma, Kangjie Zhang, Zelos Zhu, Thomas Neitmann, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

